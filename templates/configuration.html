{% extends "base.html" %}

{% block content %}
    <div class="container">
        <h1>Configuration</h1>
        <form>
            <div class="form-group">
                <label for="symbol">Symbol</label>
                <input type="text" class="form-control" id="symbol" name="symbol" value="{{ symbol }}">
            </div>
            <div class="form-group">
                <label for="start_date">Start Date</label>
                <input type="date" class="form-control" id="start_date" name="start_date" value="{{ start_date }}">
            </div>
            <div class="form-group">
                <label for="end_date">End Date</label>
                <input type="date" class="form-control" id="end_date" name="end_date" value="{{ end_date }}">
            </div>
            <div class="form-group">
                <label for="freq">Frequency</label>
                <select class="form-control" id="freq" name="freq">
                    <option value="D" {% if freq == 'D' %} selected {% endif %}>Daily</option>
                    <option value="W" {% if freq == 'W' %} selected {% endif %}>Weekly</option>
                    <option value="M" {% if freq == 'M' %} selected {% endif %}>Monthly</option>
                    <option value="Q" {% if freq == 'Q' %} selected {% endif %}>Quarterly</option>
                    <option value="Y" {% if freq == 'Y' %} selected {% endif %}>Yearly</option>
                </select>
            </div>
            <div class="form-group">
                <label for="ma_window">Moving Average Window</label>
                <input type="number" class="form-control" id="ma_window" name="ma_window" value="{{ ma_window }}">
            </div>
            <button type="submit" class="btn btn-primary" onclick="submitForm()">Save</button>
        </form>
    </div>

    <script>
        function submitForm() {
            fetch("{{ url_for('main.test.test') }}", {
                method: 'POST',
                body: new FormData(document.querySelector('form'))
            }).then(response => {
                if (response.ok) {
                    alert('Form data successfully saved!');
                } else {
                    alert('Error saving form data!');
                }
            }).catch(error => {
                console.error('Error saving form data:', error);
                alert('Error saving form data!');
            });
        }
    </script>
{% endblock %}
