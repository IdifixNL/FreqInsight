{% extends "base.html" %}

{% block content %}

<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <h1 class="mt-5">Server Profile Configuration</h1>
      <form id="profile-form">
        <div class="form-group">
          <label for="servername">Server Name:</label>
          <input type="text" class="form-control" id="servername" name="servername">
        </div>
        <div class="form-group">
          <label for="freqtrade_config_path">Freqtrade Config Path:</label>
          <input type="text" class="form-control" id="freqtrade_config_path" name="freqtrade_config_path">
        </div>
        <div class="form-group">
          <label for="user_data_path">User Data Path:</label>
          <input type="text" class="form-control" id="user_data_path" name="user_data_path">
        </div>
        <div class="form-group">
          <label for="strategies_path">Strategies Path:</label>
          <input type="text" class="form-control" id="strategies_path" name="strategies_path">
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
      </form>
    </div>
  </div>
</div>

<script>
  document.querySelector("form").addEventListener("submit", function(event) {
    event.preventDefault();

    // Collect form data
    const formData = new FormData(event.target);
    const data = Object.fromEntries(formData.entries());

    // Send form data as JSON to the server
    fetch("{{ url_for('main.test') }}", {

    
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    })
    .then(response => {
      if (!response.ok) {
        throw new Error("Network response was not ok: " + response.status + " " + response.statusText);
      }
      return response.json();
    })
    .then(data => {
      if (data.result === "success") {
        console.log("Form submitted successfully");
      }
    })
    .catch(error => {
      console.error("Error submitting form:", error);
    });
  });
</script>

{% endblock %}
